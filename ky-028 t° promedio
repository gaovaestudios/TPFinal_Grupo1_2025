int sensorPin = A0;
const int numLecturas = 10; // cantidad de muestras para promediar

float mapFloat(float x, float in_min, float in_max, float out_min, float out_max) {
  return (x - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
}

void setup() {
  Serial.begin(9600);
  Serial.println("Sensor KY-028 - Temperatura corporal (promedio 10 lecturas)");
}

void loop() {
  long suma = 0;

  // Hacemos varias lecturas para suavizar
  for (int i = 0; i < numLecturas; i++) {
    suma += analogRead(sensorPin);
    delay(50); // pequeña pausa entre lecturas
  }

  float promedio = suma / (float)numLecturas;

  // Mapeo: valor 119 → 36°C y valor 114 → 37°C
  float temperatura = mapFloat(promedio, 119, 114, 36, 37);

  Serial.print("Promedio analogico: ");
  Serial.print(promedio, 1);
  Serial.print("  |  Temperatura aprox: ");
  Serial.print(temperatura, 2);
  Serial.println(" °C");

  delay(1000); // refresca cada segundo
}
